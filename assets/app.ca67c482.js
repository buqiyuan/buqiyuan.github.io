import{d as e,a5 as t,h as a,c as n,k as s,L as o,$ as l,o as r,_ as c,a6 as i,a7 as u,b as p,I as d,e as m,F as v,a8 as y,C as h,H as f,l as g,w as b,s as _,a9 as k,aa as A,ab as E,ac as j,ad as x,ae as L,af as P,ag as w,ah as C,ai as T,V as I,u as q,j as $,y as M,aj as O,ak as S,al as Y}from"./chunks/framework.98e61c02.js";import{t as D}from"./chunks/theme.585a841a.js";const F=["onWheel"],U=["src"],X=c(e({inheritAttrs:!1,__name:"ImgPreviewer",props:{url:String},emits:["click"],setup(e,{emit:c}){t((e=>({"73f2dd90":p.value,"71b65cf8":d.value,"71b65cf6":m.value,"3db96450":i.value})));const i=a(1),u=a(),p=a("center"),d=a("0px"),m=a("0px");let v=!1,y=!1,h={x:0,y:0};const f=e=>{setTimeout((()=>{v?v=!1:c("click",e)}),80)},g=e=>{const{deltaY:t,offsetX:a,offsetY:n}=e;t&&(p.value=`${a}px ${n}px`,t<0?i.value+=.1:t>0&&i.value>.6&&(i.value-=.1))},b=e=>{y=!0;const{clientX:t,clientY:a}=e;h={x:t-parseFloat(d.value),y:a-parseFloat(m.value)}},_=e=>{if(y){v=!0;const{clientX:t,clientY:a}=e;d.value=t-h.x+"px",m.value=a-h.y+"px"}},k=e=>{setTimeout((()=>{y=v=!1}),100)};return(t,a)=>(r(),n("div",{class:"modal",onClick:f,onWheel:l(g,["prevent"]),onPointerdown:b,onPointerup:k,onPointermove:_},[s("img",o({ref_key:"imgRef",ref:u,src:e.url},t.$attrs,{draggable:"false"}),null,16,U)],40,F))}}),[["__scopeId","data-v-2ed882be"]]);X.show=e=>{const t=document.createElement("div");document.body.appendChild(t);const a={...e,onClick:async()=>{var a;await(null==(a=e.onClick)?void 0:a.call(e)),n.unmount(),t.remove()}},n=i({render:()=>u(X,a)});n.mount(t)};const H=s("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"},null,-1),R=e({__name:"APlayer",setup(e){globalThis.meting_api="https://bqy-meting-api.deno.dev/api?server=:server&type=:type&id=:id&auth=:auth&r=:r";const t=a(0),s=()=>{if(t.value++,globalThis.MetingJSElement&&!customElements.get("my-meting-js")){class e extends MetingJSElement{_loadPlayer(e){super._loadPlayer(e);const t=new CustomEvent("load",{detail:this});this.dispatchEvent(t)}}customElements.define("my-meting-js",e)}},o=({detail:e})=>{let t=0;const a=e.aplayer,n=a.events.events,s=n.error.at(0);a.on("error",(()=>{++t>5&&(a.pause(),a.lrc.hide(),n.error[0]=()=>{},console.count("连续播放失败超过 5 首，自动暂停播放")),a.notice("",0,0),console.count("aplayer error")})),a.on("playing",(function(){t=0,n.error[0]=s}))};return(e,a)=>(r(),n(v,null,[H,(r(),p(d("script"),{src:"https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js",async:"",onLoad:s},null,32)),(r(),p(d("script"),{src:"https://cdn.jsdelivr.net/npm/@xizeyoupan/meting@latest/dist/Meting.min.js",async:"",onLoad:s},null,32)),2===t.value?(r(),n("my-meting-js",{key:0,fixed:"true",mini:"true",auto:"https://y.qq.com/n/yqq/playlist/2949360967.html",onLoad:o},null,32)):m("v-if",!0)],64))}}),V="is-longpress",z=c(e({__name:"BlowHeart",setup(e){t((e=>({bb7d7578:l.value,b438cc10:c.value,16157392:o.value})));const s=a(!1),o=a(""),l=a(""),c=a("");let i;return document.documentElement.addEventListener("mousedown",(e=>{i=setTimeout((()=>{const t=e.target;t instanceof HTMLElement&&!t.closest("a")&&document.body.classList.add(V)}),1e3)})),document.documentElement.addEventListener("mouseup",(e=>{document.body.classList.contains(V)&&(o.value=crypto.randomUUID?`#${crypto.randomUUID().slice(0,6)}`:`#${Math.random().toString(16).slice(2,8)}`,l.value=e.clientY+"px",c.value=e.clientX+"px",s.value=!0),clearTimeout(i),document.body.classList.remove(V)})),(e,t)=>(r(),p(y,{to:"body"},[s.value?(r(),n("div",{key:0,class:"heart-shape",onAnimationend:t[0]||(t[0]=e=>s.value=!1)},null,32)):m("v-if",!0)]))}}),[["__scopeId","data-v-90ffaf87"]]),B=e({__name:"MyLayout",setup(e){const{Layout:t}=D;return(e,a)=>{const s=h("ClientOnly");return r(),n(v,null,[f(g(t)),f(s,null,{default:b((()=>[f(R),f(z)])),_:1})],64)}}}),J=Object.assign({},D,{Layout:B,async enhanceApp({router:e}){_&&(e.onBeforePageLoad=t=>!(e.route.path.length>1&&e.route.path===location.pathname),e.onAfterRouteChanged=e=>{globalThis.requestIdleCallback??(globalThis.requestIdleCallback=setTimeout),globalThis.requestIdleCallback((()=>{document.querySelectorAll(".vp-doc img:not([no-zoom])").forEach((e=>{e.onclick=W}))}))})}}),W=e=>{const t=e.target,a=Object.fromEntries(Array.from(t.attributes).map((({name:e,value:t})=>[e,t])));X.show(a)};const N=function e(t){if(t.extends){const a=e(t.extends);return{...a,...t,async enhanceApp(e){a.enhanceApp&&await a.enhanceApp(e),t.enhanceApp&&await t.enhanceApp(e)}}}return t}(J),G=e({name:"VitePressApp",setup(){const{site:e}=q();return $((()=>{M((()=>{document.documentElement.lang=e.value.lang,document.documentElement.dir=e.value.dir}))})),O(),S(),Y(),N.setup&&N.setup(),()=>u(N.Layout)}});async function K(){const e=function(){let e,t=_;return C((a=>{let n=T(a),s=null;return n&&(t&&(e=n),(t||e===n)&&(n=n.replace(/\.js$/,".lean.js")),s=I((()=>import(n)),[])),_&&(t=!1),s}),N.NotFound)}(),t=w(G);t.provide(A,e);const a=E(e.route);return t.provide(j,a),t.component("Content",x),t.component("ClientOnly",L),Object.defineProperties(t.config.globalProperties,{$frontmatter:{get:()=>a.frontmatter.value},$params:{get:()=>a.page.value.params}}),N.enhanceApp&&await N.enhanceApp({app:t,router:e,siteData:P}),{app:t,router:e,data:a}}_&&K().then((({app:e,router:t,data:a})=>{t.go().then((()=>{k(t.route,a.site),e.mount("#app")}))}));export{K as createApp};
